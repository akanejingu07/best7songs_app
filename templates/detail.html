{% extends "base.html" %}

{% block content %}
<div class="card">
  <h2>{{ username }}さんの投稿</h2>

  <ul class="song-list">
    {% for song in songs %}
      <li>{{ song.title }} - {{ song.artist }}</li>
    {% endfor %}
  </ul>

  {% if session.get("user_id") == post_user_id %}
  <div class="actions">
    <a href="{{ url_for('edit', id=post_id) }}" class="action-btn edit">編集</a>
  
    <form action="{{ url_for('delete', id=post_id) }}"
          method="post"
          onsubmit="return confirm('本当に削除していいですか？');">
      <button type="submit" class="action-btn delete">削除</button>
    </form>
  
    <button class="action-btn share" onclick="copyLink()">共有</button>
  </div>  
{% endif %}

<script>
function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        alert("リンクをコピーしました！");
    });
}
</script>
{% endblock %}
